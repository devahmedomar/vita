"use strict";(self.webpackChunkVitaparapharma=self.webpackChunkVitaparapharma||[]).push([[109],{2666:(fe,u,r)=>{r.r(u),r.d(u,{ShopModule:()=>be});var d=r(6814),h=r(228),e=r(4946),g=r(3596),p=r(8672),b=r(4131),m=r(281),x=r(2451),T=r(2785),c=r(95);function y(n,o){1&n&&e._UZ(0,"app-productcard",16),2&n&&e.Q6J("productCardData",o.$implicit)}let C=(()=>{class n{constructor(t,i){this.productService=t,this.spinner=i,this.shopBreadCrumbData={title:"Shop",prev:"home"},this.products=[],this.paginatedProducts=[],this.pageIndex=0,this.pageSize=12,this.totalItems=0,this.selectedSortOption="default"}ngOnInit(){this.fetchProducts()}fetchProducts(){this.spinner.show(),this.productService.getAllProducts().subscribe(t=>{t&&t.success?(this.products=t.data.products,this.totalItems=this.products.length,this.paginateAndSort()):console.error("Error fetching products:",t.message),this.spinner.hide()},t=>{console.error("Error fetching products",t),this.spinner.hide()})}paginateAndSort(){const t=this.pageIndex*this.pageSize;this.paginatedProducts=this.products.slice(t,t+this.pageSize),this.sortProducts()}sortProducts(){switch(this.selectedSortOption){case"popularity":this.sortByPopularity();break;case"rating":this.sortByAverageRating();break;case"latest":this.sortByLatest();break;case"lowToHigh":this.sortByPriceLowToHigh();break;case"highToLow":this.sortByPriceHighToLow()}}sortByPopularity(){this.paginatedProducts.sort((t,i)=>i.stockQuantity-t.stockQuantity)}sortByAverageRating(){this.paginatedProducts.sort((t,i)=>i.rating-t.rating)}sortByLatest(){this.paginatedProducts.sort((t,i)=>i.productId-t.productId)}sortByPriceLowToHigh(){this.paginatedProducts.sort((t,i)=>t.price-i.price)}sortByPriceHighToLow(){this.paginatedProducts.sort((t,i)=>i.price-t.price)}onSortOptionChange(t){t&&t.target&&t.target.value&&(this.selectedSortOption=t.target.value,this.pageIndex=0,this.paginateAndSort())}nextPage(){this.pageIndex<this.totalPages-1&&(this.pageIndex++,this.paginateAndSort(),this.scrollToTop())}prevPage(){this.pageIndex>0&&(this.pageIndex--,this.paginateAndSort(),this.scrollToTop())}scrollToTop(){const t=document.getElementById("products");t&&t.scrollIntoView({behavior:"smooth"})}get totalPages(){return Math.ceil(this.totalItems/this.pageSize)}get sortedProducts(){return this.paginatedProducts}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(g.M),e.Y36(p.t2))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-shop"]],decls:31,vars:8,consts:[[3,"breadcrumbData"],["id","products",1,"container","my-5"],[1,"row"],["bdColor","rgba(0,0,0,0.8)","size","medium","color","#80AA27","type","ball-spin-clockwise"],[1,"col-md-6","mb-5"],[1,"col-md-6","mb-5","d-flex","justify-content-md-end"],[1,"form-control",3,"ngModel","ngModelChange","change"],["value","default"],["value","popularity"],["value","rating"],["value","latest"],["value","lowToHigh"],["value","highToLow"],["class","col-md-4 col-sm-6","origin","shop",3,"productCardData",4,"ngFor","ngForOf"],[1,"col-12","d-flex","justify-content-between"],[1,"",3,"disabled","click"],["origin","shop",1,"col-md-4","col-sm-6",3,"productCardData"]],template:function(i,a){1&i&&(e._UZ(0,"app-navbar")(1,"app-breadcrumb",0),e.TgZ(2,"div",1)(3,"div",2),e._UZ(4,"ngx-spinner",3),e.TgZ(5,"div",4),e._uU(6),e.qZA(),e.TgZ(7,"div",5)(8,"div")(9,"select",6),e.NdJ("ngModelChange",function(l){return a.selectedSortOption=l})("change",function(l){return a.onSortOptionChange(l)}),e.TgZ(10,"option",7),e._uU(11,"Default Sorting"),e.qZA(),e.TgZ(12,"option",8),e._uU(13,"Sort by Popularity"),e.qZA(),e.TgZ(14,"option",9),e._uU(15,"Sort by Average Rating"),e.qZA(),e.TgZ(16,"option",10),e._uU(17,"Sort by Latest"),e.qZA(),e.TgZ(18,"option",11),e._uU(19,"Sort by Price Low to High"),e.qZA(),e.TgZ(20,"option",12),e._uU(21,"Sort by Price High to Low"),e.qZA()()()()(),e.TgZ(22,"div",2),e.YNc(23,y,1,1,"app-productcard",13),e.qZA(),e.TgZ(24,"div",2)(25,"div",14)(26,"button",15),e.NdJ("click",function(){return a.prevPage()}),e._uU(27," << "),e.qZA(),e.TgZ(28,"button",15),e.NdJ("click",function(){return a.nextPage()}),e._uU(29," >> "),e.qZA()()()(),e._UZ(30,"app-footer")),2&i&&(e.xp6(1),e.Q6J("breadcrumbData",a.shopBreadCrumbData),e.xp6(5),e.lnq(" Showing ",a.pageIndex*a.pageSize+1,"-",(a.pageIndex+1)*a.pageSize>a.totalItems?a.totalItems:(a.pageIndex+1)*a.pageSize," of ",a.totalItems," results "),e.xp6(3),e.Q6J("ngModel",a.selectedSortOption),e.xp6(14),e.Q6J("ngForOf",a.paginatedProducts),e.xp6(3),e.Q6J("disabled",0===a.pageIndex),e.xp6(2),e.Q6J("disabled",a.pageIndex>=a.totalPages-1))},dependencies:[d.sg,b.S,m.c,x.I,T.L,c.YN,c.Kr,c.EJ,c.JJ,c.On,p.Ro],styles:["button[_ngcontent-%COMP%]{background-color:#80aa27;color:#fff;padding:5px 10px;border:none}button[_ngcontent-%COMP%]:hover, button[_ngcontent-%COMP%]:focus{opacity:.9}  .ngx-spinner{display:flex!important;justify-content:center;align-items:center}  .ngx-spinner>div{display:inline-block!important}  .ngx-spinner>div>div{background-color:#80aa27!important}"]})}return n})();var I=r(6593),w=r(5244),P=r(4817),f=r(6022),_=r(9560);function S(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",26)(1,"p-rating",27),e.NdJ("ngModelChange",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.singleProduct.rating=a)}),e.qZA(),e.TgZ(2,"p",28),e._uU(3,"(1 customer review)"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.singleProduct.rating)("cancel",!1)}}const A=function(n,o){return{success:n,error:o}};function k(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",29)(1,"div",30),e._uU(2),e.qZA(),e.TgZ(3,"button",31),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clearNotification())}),e._uU(4,"Close"),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("ngClass",e.WLB(2,A,"success"===t.notificationType,"error"===t.notificationType)),e.xp6(2),e.Oqu(t.notificationMessage)}}const O=function(n){return{"filled-heart":n}};function V(n,o){if(1&n&&(e.ynx(0),e._UZ(1,"i",32),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(1,O,t.isInWishlist))}}const E=function(n){return{"outlined-heart":n}};function H(n,o){if(1&n&&e._UZ(0,"i",33),2&n){const t=e.oxw();e.Q6J("ngClass",e.VKq(1,E,!t.isInWishlist))}}const M=[{path:"",component:C},{path:":id",component:(()=>{class n{constructor(t,i,a,s,l,me){this.route=t,this._ProductService=i,this.sanitizer=a,this.loginService=s,this.cartService=l,this.spinner=me,this.notificationMessage=null,this.notificationType="success",this.isLoggedIn=!1,this.rate=4,this.prodNumber=1,this.activeIndex=0,this.productId="",this.categoryId=0,this.safeProductDescription="",this.isInWishlist=!1,this.relatedProducts=[]}getSingleProduct(){this.spinner.show(),this._ProductService.getSingleProduct(+this.productId).subscribe({next:t=>{this.singleProduct=t.data.product,this.categoryId=this.singleProduct.categoryId,this.getCategoriesById(),this.safeProductDescription=this.sanitizer.bypassSecurityTrustHtml(this.singleProduct.description),this.spinner.hide()},error:t=>{console.log(t),this.spinner.hide()}})}getCategoriesById(){this._ProductService.getCategoryListOfProduct(this.categoryId).subscribe({next:t=>{this.category=t.data.category},error:t=>{console.log(t)}})}ngOnInit(){this.loginService.isLoggedIn$().subscribe(t=>{this.isLoggedIn=t}),this.route.paramMap.subscribe(t=>{this.productId=t.get("id"),this.isLoggedIn&&this.checkWishlistStatus()}),this.getSingleProduct()}onAddToCart(t){this.isLoggedIn?this.cartService.updateCart(t,this.prodNumber).subscribe(i=>{this.showNotification("Item added to cart","success")},i=>{console.error("Failed to add item to cart:",i),this.showNotification("Failed to add item to cart","error")}):this.showNotification("Please login first.","error")}showNotification(t,i){this.notificationMessage=t,this.notificationType=i,setTimeout(()=>{this.clearNotification()},3e3)}clearNotification(){this.notificationMessage=null}checkWishlistStatus(){console.log("Checking wishlist status for productId:",this.productId),this._ProductService.getWishlist().subscribe({next:t=>{this.isInWishlist=t.some(i=>i.toString()===this.productId.toString())},error:t=>{}})}addToWishlist(t){this._ProductService.addToWishlist(t).subscribe({next:i=>{this.isInWishlist=!0},error:i=>{}})}removeFromWishlist(t){this._ProductService.removeFromWishlist(t).subscribe({next:i=>{this.isInWishlist=!1},error:i=>{}})}toggleWishlist(t){this.isInWishlist?this.removeFromWishlist(t):this.addToWishlist(t)}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(h.gz),e.Y36(g.M),e.Y36(I.H7),e.Y36(w.r),e.Y36(P.N),e.Y36(p.t2))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-single-product"]],decls:42,vars:23,consts:[[1,"single-product"],[1,"container","mt-5"],[1,"row"],["bdColor","rgba(0,0,0,0.8)","size","medium","color","#80AA27","type","ball-spin-clockwise"],[1,"col-md-5","position-relative"],[1,"sale-pos"],["alt","",1,"w-100",3,"src"],[1,"col-md-7","px-3","py-2"],[1,"subhead","text-muted",3,"innerHTML"],["class","d-flex align-items-center",4,"ngIf"],[1,"d-flex","mt-3","mb-2"],[1,"old-price","me-4","text-decoration-line-through","text-muted"],[1,"price","text-black"],[1,"text-muted","desc"],[1,"d-flex","bg-white","py-3"],["buttonLayout","horizontal","spinnerMode","horizontal","inputId","integeronly","inputId","horizontal","decrementButtonClass","p-button-incdec","incrementButtonClass","p-button-incdec","incrementButtonIcon","pi pi-plus","decrementButtonIcon","pi pi-minus",3,"ngModel","showButtons","min","max","ngModelChange"],[1,"btn-main",3,"disabled","click"],["class","custom-notification",3,"ngClass",4,"ngIf"],[1,"d-flex","align-items-center","mt-3","wish",3,"click"],[2,"cursor","pointer"],[4,"ngIf","ngIfElse"],["notInWishlist",""],[1,"m-0","p-0",2,"cursor","pointer"],[1,"category","my-3"],[1,"fs-5","text-muted"],[1,"fs-6","ms-2"],[1,"d-flex","align-items-center"],["starStyleClass","custom-stars",3,"ngModel","cancel","ngModelChange"],[1,"numreview","text-muted","m-0","p-0","ms-3"],[1,"custom-notification",3,"ngClass"],[1,"message"],[1,"close-button",3,"click"],[1,"pi","pi-heart-fill","me-2",3,"ngClass"],[1,"pi","pi-heart","me-2",3,"ngClass"]],template:function(i,a){if(1&i&&(e._UZ(0,"app-navbar"),e.TgZ(1,"div",0)(2,"div",1)(3,"div",2),e._UZ(4,"ngx-spinner",3),e.TgZ(5,"div",4)(6,"div",5),e._uU(7,"22 %"),e.qZA(),e._UZ(8,"img",6),e.qZA(),e.TgZ(9,"div",7)(10,"h3"),e._uU(11),e.qZA(),e._UZ(12,"p",8),e.YNc(13,S,4,2,"div",9),e.TgZ(14,"div",10)(15,"div",11),e._uU(16),e.ALo(17,"currency"),e.qZA(),e.TgZ(18,"div",12),e._uU(19),e.ALo(20,"currency"),e.qZA()(),e.TgZ(21,"p",13),e._uU(22),e.qZA(),e.TgZ(23,"div",14)(24,"p-inputNumber",15),e.NdJ("ngModelChange",function(l){return a.prodNumber=l}),e.qZA(),e.TgZ(25,"button",16),e.NdJ("click",function(){return a.onAddToCart(a.singleProduct.productId)}),e._uU(26,"Add To cart"),e.qZA()(),e.YNc(27,k,5,5,"div",17),e.TgZ(28,"div",18),e.NdJ("click",function(){return a.toggleWishlist(a.singleProduct.productId)}),e.TgZ(29,"div",19),e.YNc(30,V,2,3,"ng-container",20),e.YNc(31,H,1,3,"ng-template",null,21,e.W1O),e.qZA(),e.TgZ(33,"p",22),e._uU(34),e.qZA()(),e.TgZ(35,"div",23)(36,"span",24),e._uU(37,"Category: "),e.qZA(),e.TgZ(38,"span",25),e._uU(39),e.qZA()()()(),e._UZ(40,"div",2),e.qZA(),e._UZ(41,"app-footer"),e.qZA()),2&i){const s=e.MAs(32);e.xp6(8),e.Q6J("src",null==a.singleProduct?null:a.singleProduct.pictures[0],e.LSH),e.xp6(3),e.Oqu(null==a.singleProduct?null:a.singleProduct.name),e.xp6(1),e.Q6J("innerHTML",a.safeProductDescription,e.oJD),e.xp6(1),e.Q6J("ngIf",a.singleProduct),e.xp6(3),e.Oqu(e.xi3(17,17,null==a.singleProduct?null:a.singleProduct.priceBeforeDiscount,"USD")),e.xp6(3),e.Oqu(e.xi3(20,20,null==a.singleProduct?null:a.singleProduct.priceAfterDiscount,"USD")),e.xp6(3),e.hij(" ",null==a.singleProduct?null:a.singleProduct.about," "),e.xp6(2),e.Q6J("ngModel",a.prodNumber)("showButtons",!0)("min",1)("max",null==a.singleProduct?null:a.singleProduct.stockQuantity),e.xp6(1),e.Q6J("disabled",!a.isLoggedIn),e.xp6(2),e.Q6J("ngIf",a.notificationMessage),e.xp6(3),e.Q6J("ngIf",a.isInWishlist)("ngIfElse",s),e.xp6(4),e.Oqu(a.isInWishlist?"Remove from Wishlist":"Add to Wishlist"),e.xp6(5),e.Oqu(null==a.category?null:a.category.name)}},dependencies:[d.mk,d.O5,b.S,m.c,f.iG,c.JJ,c.On,_.Rn,p.Ro,d.H9],styles:[".single-product[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Marcellus,Helvetica Neue;font-weight:400;font-size:30px;line-height:38px;letter-spacing:10px}.single-product[_ngcontent-%COMP%]   .subhead[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-weight:300;font-size:16px;line-height:30px;color:#000}.single-product[_ngcontent-%COMP%]   .numreview[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-weight:300;font-size:12px;line-height:14px;color:#000}.old-price[_ngcontent-%COMP%], .price[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-weight:500;font-size:21px;line-height:20px}.single-product[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{font-family:Rubik,sans-serif;font-weight:300;font-size:16px;line-height:27px}.single-product[_ngcontent-%COMP%]   .wish[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-weight:500;font-size:16px}.single-product[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:30px;margin-top:30px}.related[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Rubik,sans-serif;color:#000;font-size:24px;font-weight:400;line-height:28px;text-align:center;letter-spacing:4px;margin-bottom:40px}.image-review[_ngcontent-%COMP%]{display:flex;align-items:center}.image-review[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;margin-right:20px}.image-review[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%}.review-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.text-review[_ngcontent-%COMP%]{font-size:14px;font-weight:300;line-height:24px}.card[_ngcontent-%COMP%]{background-color:#fff!important}.product-card[_ngcontent-%COMP%]{box-shadow:#63636323 0 2px 8px;padding:10px;text-align:center;border:0}.price[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin-top:10px}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:195px}.custom-notification[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);padding:20px;border-radius:8px;background-color:#000c;color:#fff;font-size:18px;text-align:center;z-index:1000;box-shadow:0 8px 16px #0000004d}.success[_ngcontent-%COMP%]{background-color:#80aa27}.error[_ngcontent-%COMP%]{background-color:#f44336}.message[_ngcontent-%COMP%]{margin-bottom:10px}.close-button[_ngcontent-%COMP%]{background:none;border:none;color:#fff;cursor:pointer;font-weight:700}i[_ngcontent-%COMP%]{font-size:1.5rem}.filled-heart[_ngcontent-%COMP%]{color:red}.outlined-heart[_ngcontent-%COMP%]{color:inherit}  .ngx-spinner{display:flex!important;justify-content:center;align-items:center}  .ngx-spinner>div{display:inline-block!important}  .ngx-spinner>div>div{background-color:#80aa27!important}"]})}return n})(),title:"single product"}];let B=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[h.Bz.forChild(M),h.Bz]})}return n})();var D=r(8169),v=r(5219),Z=r(2537),L=r(4562),z=r(7778),F=r(4480),Q=r(3259);let ue=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=e.oAB({type:n});static \u0275inj=e.cJS({imports:[d.ez,v.m8,Q.z,F.T,z.q,Z.w,L.X,v.m8]})}return n})();var ge=r(336);let be=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[d.ez,B,D.m,f.Xt,c.u5,_.L$,ue,ge.hJ,p.ef]})}return n})()}}]);